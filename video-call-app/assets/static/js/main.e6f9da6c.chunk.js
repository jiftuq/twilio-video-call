(this["webpackJsonpvideo-call-react"]=this["webpackJsonpvideo-call-react"]||[]).push([[0],{109:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n(7),a=n.n(c),r=n(83),s=n.n(r),i=(n(91),n(17)),l=n(28),u=n.n(l),b=n(84),d=n(85),j=n.n(d),p=function(e){var t=e.setToken,n=e.name,c=e.room,a=e.setName,r=e.setRoom,s=function(){var e=Object(b.a)(u.a.mark((function e(o){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),console.log("Nombre",n),console.log("Sala",c),e.next=5,j.a.post("https://video-call-app-7909-dev.twil.io/video-token",{identity:n,room:c});case 5:a=e.sent,console.log("result:: ",a),t(a.data),console.log("Token:: ",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("form",{onSubmit:s,children:[Object(o.jsxs)("label",{htmlFor:"name",children:["Nombre",Object(o.jsx)("input",{type:"text",id:"name",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(o.jsxs)("label",{htmlFor:"room",children:["Sala",Object(o.jsx)("input",{type:"text",id:"room",value:c,onChange:function(e){return r(e.target.value)}})]}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{type:"submit",children:"Ingresar a la Sala"})]})},f=(n(109),n(29)),h=n.n(f),m=function(e){var t=e.token,n=e.room,a=Object(c.useRef)(),r=Object(c.useRef)();return console.log("TOKEN",t),Object(c.useEffect)((function(){h.a.connect(t,{video:!0,audio:!0,name:n}).then((function(e){h.a.createLocalVideoTrack().then((function(e){a.current.appendChild(e.attach())}));var t=function(e){console.log("new participant!"),console.log(e),e.tracks.forEach((function(e){if(e.isSubscribed){var t=e.track;r.current.appendChild(t.attach()),console.log("attached to remote video")}})),e.on("trackSubscribed",(function(e){console.log("track subscribed"),r.current.appendChild(e.attach())}))};e.participants.forEach(t),e.on("participantConnected",t)}))}),[t]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("h2",{children:["T\xfa est\xe1s en la Sala: ",n]}),Object(o.jsx)("div",{ref:a}),Object(o.jsx)("div",{ref:r})]})};var v=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("room"),s=Object(i.a)(r,2),l=s[0],u=s[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),j=d[0],f=d[1];return Object(o.jsx)("div",{className:"App",children:j?Object(o.jsx)(m,{room:l,token:j}):Object(o.jsx)(p,{setToken:f,name:n,room:l,setName:a,setRoom:u})})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),a(e),r(e)}))};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(v,{})}),document.getElementById("root")),O()},91:function(e,t,n){}},[[210,1,2]]]);
//# sourceMappingURL=main.e6f9da6c.chunk.js.map